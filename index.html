<!DOCTYPE html>
<html lang="hy">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Գտիր քո սեղանը</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600&display=swap');
body {
  font-family: 'Montserrat', sans-serif;
  background: linear-gradient(to right, #800020, #000);
  color: #fff;
  margin: 0;
  padding: 40px 20px;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  align-items: center;
}
h1 { font-size: 28px; margin-bottom: 25px; text-align:center; }
input {
  width: 100%; max-width: 400px; font-size: 18px;
  padding: 14px 18px; border-radius: 10px; border: none;
  outline: none; box-shadow: 0 3px 8px rgba(0,0,0,0.3);
  margin-bottom: 25px; background: #fff; color: #000; font-weight: 500;
}
input::placeholder { color: #555; font-style: italic; }
#results { width: 100%; max-width: 500px; }
.row {
  padding: 14px 18px; margin-bottom: 12px; background: #fff;
  color: #000; border-radius: 8px; display: flex; justify-content: space-between;
  align-items: center; font-size: 16px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.15);
  transition: transform 0.2s, box-shadow 0.2s;
}
.row:hover { transform: translateY(-2px); box-shadow: 0 6px 14px rgba(0,0,0,0.25); }
.table { font-weight: 600; color: #800020; }
@media (max-width: 600px) {
  body { padding: 20px 15px; }
  input { font-size: 16px; }
  .row { font-size: 15px; flex-direction: column; align-items: flex-start; }
  .table { margin-top: 6px; float: none; }
}
</style>
</head>
<body>

<h1>Գտիր քո սեղանը</h1>
<input type="text" placeholder="Գրիր քո անունը" oninput="search(this.value)">
<div id="results"></div>

<script>
// ===== GOOGLE SHEET SETTINGS =====
const SHEET_ID = "1GF1ARQ52zejxKaIpS2At_D87OWhq92PYzVYCynDnItY"; // <-- այստեղ Google Sheets ID դնես
const SHEET_NAME = "Sheet1";    // <-- եթե էջի անունը փոխել ես, գրիր այն
let guests = [];

// ===== FETCH DATA FROM GOOGLE SHEET =====
fetch(`https://opensheet.elk.sh/${SHEET_ID}/${SHEET_NAME}`)
  .then(res => res.json())
  .then(data => {
    guests = data;
    console.log("Guests loaded:", guests); // ստուգելու համար
  })
  .catch(err => console.error("Error fetching sheet:", err));

// ===== SEARCH FUNCTION =====
function search() {
  const input = document.getElementById("search").value.toLowerCase().trim();
  const result = document.getElementById("results");

  // Եթե input-ը դատարկ է, հեռացրու ցուցակը
  if (input === "") {
    result.innerHTML = "";  // մաքրում ենք ցանկը
    return;                 // էլի ցույց չենք տալիս
  }

  // Որոնում անցնում է միայն եթե ինչ-որ բան կա
  const matches = guests.filter(g =>
    g.Name.toLowerCase().includes(input) ||
    (g.Հայերեն_Անուն && g.Հայերեն_Անուն.toLowerCase().includes(input))
  );

  result.innerHTML = ""; // նախ մաքրում ենք նախորդ արդյունքները

  if(matches.length === 0) {
    result.innerHTML = "<div class='row'>Սեղան չի գտնվել</div>";
    return;
  }

  matches.forEach(g => {
    result.innerHTML += `
      <div class="row">
        ${g.Name} | ${g.Հայերեն_Անուն || ''} <span class="table">Սեղան ${g.Table}</span>
      </div>
    `;
  });
}
</script>

</body>
</html>
